{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"options\", \"optionSize\", \"close\", \"closeOnSelect\", \"onSelect\", \"onDeselect\", \"onFilterChange\", \"hasFilter\", \"selected\", \"optionsFilter\", \"isMultiSelect\", \"height\", \"width\", \"renderItem\", \"filterPlaceholder\", \"filterIcon\", \"defaultSearchValue\", \"shouldAutoFocus\"];\nimport React, { memo, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport VirtualList from '@segment/react-tiny-virtual-list';\nimport fuzzaldrin from 'fuzzaldrin-plus';\nimport PropTypes from 'prop-types';\nimport { SearchIcon } from '../../icons';\nimport { Image } from '../../image';\nimport { Pane } from '../../layers';\nimport SearchTableHeaderCell from '../../table/src/SearchTableHeaderCell';\nimport TableHead from '../../table/src/TableHead';\nimport { useTheme } from '../../theme';\nimport Option from './Option';\nimport OptionShapePropType from './OptionShapePropType';\n/**\n * Fuzzaldrin-plus is the default filter, but you can use your own\n * as long as they follow the following signature:\n * @param options <Array[String]> - ['label', 'label2', ...]\n * @param input <String>\n */\n\nvar fuzzyFilter = function fuzzyFilter(options, input, _ref) {\n  var key = _ref.key;\n  return fuzzaldrin.filter(options, input, {\n    key: key\n  });\n};\n\nvar noop = function noop() {};\n\nvar defaultRenderItem = function defaultRenderItem(props) {\n  return /*#__PURE__*/React.createElement(Option, props, props.icon && /*#__PURE__*/React.createElement(Image, {\n    src: props.icon,\n    width: 24,\n    marginRight: 8\n  }), props.label);\n};\n\ndefaultRenderItem.displayName = \"defaultRenderItem\";\nvar OptionsList = /*#__PURE__*/memo(function OptionsList(props) {\n  var _props$options = props.options,\n      originalOptions = _props$options === void 0 ? [] : _props$options,\n      _props$optionSize = props.optionSize,\n      optionSize = _props$optionSize === void 0 ? 33 : _props$optionSize,\n      close = props.close,\n      closeOnSelect = props.closeOnSelect,\n      _props$onSelect = props.onSelect,\n      onSelect = _props$onSelect === void 0 ? noop : _props$onSelect,\n      _props$onDeselect = props.onDeselect,\n      onDeselect = _props$onDeselect === void 0 ? noop : _props$onDeselect,\n      _props$onFilterChange = props.onFilterChange,\n      onFilterChange = _props$onFilterChange === void 0 ? noop : _props$onFilterChange,\n      hasFilter = props.hasFilter,\n      _props$selected = props.selected,\n      selected = _props$selected === void 0 ? [] : _props$selected,\n      optionsFilter = props.optionsFilter,\n      isMultiSelect = props.isMultiSelect,\n      height = props.height,\n      width = props.width,\n      _props$renderItem = props.renderItem,\n      _renderItem = _props$renderItem === void 0 ? defaultRenderItem : _props$renderItem,\n      _props$filterPlacehol = props.filterPlaceholder,\n      filterPlaceholder = _props$filterPlacehol === void 0 ? 'Filter...' : _props$filterPlacehol,\n      _props$filterIcon = props.filterIcon,\n      filterIcon = _props$filterIcon === void 0 ? SearchIcon : _props$filterIcon,\n      _props$defaultSearchV = props.defaultSearchValue,\n      defaultSearchValue = _props$defaultSearchV === void 0 ? '' : _props$defaultSearchV,\n      _props$shouldAutoFocu = props.shouldAutoFocus,\n      shouldAutoFocus = _props$shouldAutoFocu === void 0 ? true : _props$shouldAutoFocu,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var _useState = useState(defaultSearchValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchValue = _useState2[0],\n      setSearchValue = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchRef = _useState4[0],\n      setSearchRef = _useState4[1];\n\n  var requestId = useRef();\n  var theme = useTheme();\n  var tokens = theme.tokens;\n  var isSelected = useCallback(function (item) {\n    return Boolean(selected.find(function (selectedItem) {\n      return selectedItem === item.value;\n    }));\n  }, [selected]);\n  var optionLabels = useMemo(function () {\n    return originalOptions.map(function (item) {\n      return item.label;\n    });\n  }, [originalOptions]); // Gets filtered options any time the filter fn, value, or options change\n\n  var options = useMemo(function () {\n    if (searchValue.trim() === '') {\n      return originalOptions;\n    } // Preserve backwards compatibility with allowing custom filters, which accept array of strings\n\n\n    if (typeof optionsFilter === 'function') {\n      return optionsFilter(optionLabels, searchValue).map(function (name) {\n        return originalOptions.find(function (item) {\n          return item.label === name;\n        });\n      });\n    }\n\n    return fuzzyFilter(originalOptions, searchValue, {\n      key: 'label'\n    });\n  }, [originalOptions, optionLabels, optionsFilter, searchValue]);\n  var getCurrentIndex = useCallback(function () {\n    return options.findIndex(function (option) {\n      return option.value === selected[selected.length - 1];\n    });\n  }, [selected, options]);\n  var handleArrowUp = useCallback(function () {\n    var nextIndex = getCurrentIndex() - 1;\n\n    if (nextIndex < 0) {\n      nextIndex = options.length - 1;\n    }\n\n    if (isSelected(options[nextIndex])) {\n      return;\n    }\n\n    onSelect(options[nextIndex]);\n  }, [onSelect, options, getCurrentIndex, isSelected]);\n  var handleArrowDown = useCallback(function () {\n    var nextIndex = getCurrentIndex() + 1;\n\n    if (nextIndex === options.length) {\n      nextIndex = 0;\n    }\n\n    if (!isSelected(options[nextIndex])) {\n      onSelect(options[nextIndex]);\n    }\n  }, [onSelect, options, getCurrentIndex, isSelected]);\n  var handleChange = useCallback(function (searchValue) {\n    setSearchValue(searchValue);\n    onFilterChange(searchValue);\n  }, [onFilterChange]);\n  var handleSelect = useCallback(function (item) {\n    if (isSelected(item) && isMultiSelect) {\n      onDeselect(item);\n    } else {\n      onSelect(item);\n    }\n\n    if (!isMultiSelect && closeOnSelect) {\n      close();\n    }\n  }, [onDeselect, isMultiSelect, closeOnSelect, onSelect, isSelected, close]);\n  var handleEnter = useCallback(function () {\n    var isSelected = getCurrentIndex() !== -1;\n\n    if (isSelected) {\n      if (!isMultiSelect && closeOnSelect) {\n        close();\n      }\n    }\n  }, [isMultiSelect, close, closeOnSelect, getCurrentIndex]);\n  var handleDeselect = useCallback(function (item) {\n    onDeselect(item);\n  }, [onDeselect]);\n  var handleKeyDown = useCallback(function (e) {\n    if (e.key === 'ArrowUp') {\n      handleArrowUp();\n    }\n\n    if (e.key === 'ArrowDown') {\n      handleArrowDown();\n    }\n\n    if (e.key === 'Enter') {\n      handleEnter();\n    }\n\n    if (e.key === 'Escape') {\n      close();\n    }\n  }, [close, handleArrowUp, handleArrowDown, handleEnter]);\n  useEffect(function () {\n    if (hasFilter) {\n      requestId.current = requestAnimationFrame(function () {\n        if (searchRef && shouldAutoFocus) {\n          searchRef.focus();\n        }\n      });\n      window.addEventListener('keydown', handleKeyDown);\n      return function () {\n        cancelAnimationFrame(requestId.current);\n        window.removeEventListener('keydown', handleKeyDown);\n      };\n    }\n  }, [hasFilter, searchRef, handleKeyDown, shouldAutoFocus]);\n  var listHeight = height - (hasFilter ? 32 : 0);\n  var currentIndex = getCurrentIndex();\n  var scrollToIndex = currentIndex === -1 ? 0 : currentIndex;\n  return /*#__PURE__*/React.createElement(Pane, _extends({\n    height: height,\n    width: width,\n    display: \"flex\",\n    flexDirection: \"column\"\n  }, rest), hasFilter && /*#__PURE__*/React.createElement(TableHead, {\n    height: 32,\n    backgroundColor: tokens.colors.gray50\n  }, /*#__PURE__*/React.createElement(SearchTableHeaderCell, {\n    onChange: handleChange,\n    ref: setSearchRef,\n    borderRight: null,\n    placeholder: filterPlaceholder,\n    icon: filterIcon\n  })), /*#__PURE__*/React.createElement(Pane, {\n    flex: 1\n  }, options.length > 0 && /*#__PURE__*/React.createElement(VirtualList, {\n    height: listHeight,\n    width: \"100%\",\n    itemSize: optionSize,\n    itemCount: options.length,\n    overscanCount: 20,\n    scrollToAlignment: \"auto\",\n    scrollToIndex: scrollToIndex || undefined,\n    renderItem: function renderItem(_ref2) {\n      var index = _ref2.index,\n          style = _ref2.style;\n      var item = options[index];\n      var isItemSelected = isSelected(item);\n      var itemProps = {\n        key: item.value,\n        label: item.label,\n        icon: item.icon,\n        item: item,\n        style: style,\n        height: optionSize,\n        onSelect: function onSelect() {\n          return handleSelect(item);\n        },\n        onDeselect: function onDeselect() {\n          return handleDeselect(item);\n        },\n        isSelectable: !isItemSelected || isMultiSelect,\n        isSelected: isItemSelected,\n        disabled: item.disabled,\n        tabIndex: 0\n      };\n      return _renderItem(itemProps);\n    }\n  })));\n});\nOptionsList.propTypes = {\n  options: PropTypes.arrayOf(OptionShapePropType),\n  close: PropTypes.func,\n  height: PropTypes.number,\n  width: PropTypes.number,\n\n  /**\n   * When true, multi select is accounted for.\n   */\n  isMultiSelect: PropTypes.bool,\n\n  /**\n   * When true, menu closes on option selection.\n   */\n  closeOnSelect: PropTypes.bool,\n\n  /**\n   * This holds the values of the options\n   */\n  selected: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number])),\n\n  /**\n   * When true, menu auto focuses on the search/filter bar.\n   */\n  shouldAutoFocus: PropTypes.bool,\n  onSelect: PropTypes.func,\n  onDeselect: PropTypes.func,\n  onFilterChange: PropTypes.func,\n  hasFilter: PropTypes.bool,\n  optionSize: PropTypes.number,\n  renderItem: PropTypes.func,\n  filterPlaceholder: PropTypes.string,\n  filterIcon: PropTypes.oneOfType([PropTypes.elementType, PropTypes.element]),\n  optionsFilter: PropTypes.func,\n  defaultSearchValue: PropTypes.string\n};\nexport default OptionsList;","map":{"version":3,"sources":["D:/0xtest/wifi-card-master/node_modules/evergreen-ui/esm/select-menu/src/OptionsList.js"],"names":["_extends","_slicedToArray","_objectWithoutProperties","_excluded","React","memo","useCallback","useEffect","useMemo","useRef","useState","VirtualList","fuzzaldrin","PropTypes","SearchIcon","Image","Pane","SearchTableHeaderCell","TableHead","useTheme","Option","OptionShapePropType","fuzzyFilter","options","input","_ref","key","filter","noop","defaultRenderItem","props","createElement","icon","src","width","marginRight","label","displayName","OptionsList","_props$options","originalOptions","_props$optionSize","optionSize","close","closeOnSelect","_props$onSelect","onSelect","_props$onDeselect","onDeselect","_props$onFilterChange","onFilterChange","hasFilter","_props$selected","selected","optionsFilter","isMultiSelect","height","_props$renderItem","renderItem","_renderItem","_props$filterPlacehol","filterPlaceholder","_props$filterIcon","filterIcon","_props$defaultSearchV","defaultSearchValue","_props$shouldAutoFocu","shouldAutoFocus","rest","_useState","_useState2","searchValue","setSearchValue","_useState3","_useState4","searchRef","setSearchRef","requestId","theme","tokens","isSelected","item","Boolean","find","selectedItem","value","optionLabels","map","trim","name","getCurrentIndex","findIndex","option","length","handleArrowUp","nextIndex","handleArrowDown","handleChange","handleSelect","handleEnter","handleDeselect","handleKeyDown","e","current","requestAnimationFrame","focus","window","addEventListener","cancelAnimationFrame","removeEventListener","listHeight","currentIndex","scrollToIndex","display","flexDirection","backgroundColor","colors","gray50","onChange","ref","borderRight","placeholder","flex","itemSize","itemCount","overscanCount","scrollToAlignment","undefined","_ref2","index","style","isItemSelected","itemProps","isSelectable","disabled","tabIndex","propTypes","arrayOf","func","number","bool","oneOfType","string","elementType","element"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,wBAAP,MAAqC,oDAArC;AACA,IAAIC,SAAS,GAAG,CAAC,SAAD,EAAY,YAAZ,EAA0B,OAA1B,EAAmC,eAAnC,EAAoD,UAApD,EAAgE,YAAhE,EAA8E,gBAA9E,EAAgG,WAAhG,EAA6G,UAA7G,EAAyH,eAAzH,EAA0I,eAA1I,EAA2J,QAA3J,EAAqK,OAArK,EAA8K,YAA9K,EAA4L,mBAA5L,EAAiN,YAAjN,EAA+N,oBAA/N,EAAqP,iBAArP,CAAhB;AACA,OAAOC,KAAP,IAAgBC,IAAhB,EAAsBC,WAAtB,EAAmCC,SAAnC,EAA8CC,OAA9C,EAAuDC,MAAvD,EAA+DC,QAA/D,QAA+E,OAA/E;AACA,OAAOC,WAAP,MAAwB,kCAAxB;AACA,OAAOC,UAAP,MAAuB,iBAAvB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,SAASC,KAAT,QAAsB,aAAtB;AACA,SAASC,IAAT,QAAqB,cAArB;AACA,OAAOC,qBAAP,MAAkC,uCAAlC;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBC,OAArB,EAA8BC,KAA9B,EAAqCC,IAArC,EAA2C;AAC3D,MAAIC,GAAG,GAAGD,IAAI,CAACC,GAAf;AACA,SAAOd,UAAU,CAACe,MAAX,CAAkBJ,OAAlB,EAA2BC,KAA3B,EAAkC;AACvCE,IAAAA,GAAG,EAAEA;AADkC,GAAlC,CAAP;AAGD,CALD;;AAOA,IAAIE,IAAI,GAAG,SAASA,IAAT,GAAgB,CAAE,CAA7B;;AAEA,IAAIC,iBAAiB,GAAG,SAASA,iBAAT,CAA2BC,KAA3B,EAAkC;AACxD,SAAO,aAAa1B,KAAK,CAAC2B,aAAN,CAAoBX,MAApB,EAA4BU,KAA5B,EAAmCA,KAAK,CAACE,IAAN,IAAc,aAAa5B,KAAK,CAAC2B,aAAN,CAAoBhB,KAApB,EAA2B;AAC3GkB,IAAAA,GAAG,EAAEH,KAAK,CAACE,IADgG;AAE3GE,IAAAA,KAAK,EAAE,EAFoG;AAG3GC,IAAAA,WAAW,EAAE;AAH8F,GAA3B,CAA9D,EAIhBL,KAAK,CAACM,KAJU,CAApB;AAKD,CAND;;AAQAP,iBAAiB,CAACQ,WAAlB,GAAgC,mBAAhC;AACA,IAAIC,WAAW,GAAG,aAAajC,IAAI,CAAC,SAASiC,WAAT,CAAqBR,KAArB,EAA4B;AAC9D,MAAIS,cAAc,GAAGT,KAAK,CAACP,OAA3B;AAAA,MACIiB,eAAe,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4B,EAA5B,GAAiCA,cADvD;AAAA,MAEIE,iBAAiB,GAAGX,KAAK,CAACY,UAF9B;AAAA,MAGIA,UAAU,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+B,EAA/B,GAAoCA,iBAHrD;AAAA,MAIIE,KAAK,GAAGb,KAAK,CAACa,KAJlB;AAAA,MAKIC,aAAa,GAAGd,KAAK,CAACc,aAL1B;AAAA,MAMIC,eAAe,GAAGf,KAAK,CAACgB,QAN5B;AAAA,MAOIA,QAAQ,GAAGD,eAAe,KAAK,KAAK,CAAzB,GAA6BjB,IAA7B,GAAoCiB,eAPnD;AAAA,MAQIE,iBAAiB,GAAGjB,KAAK,CAACkB,UAR9B;AAAA,MASIA,UAAU,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+BnB,IAA/B,GAAsCmB,iBATvD;AAAA,MAUIE,qBAAqB,GAAGnB,KAAK,CAACoB,cAVlC;AAAA,MAWIA,cAAc,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmCrB,IAAnC,GAA0CqB,qBAX/D;AAAA,MAYIE,SAAS,GAAGrB,KAAK,CAACqB,SAZtB;AAAA,MAaIC,eAAe,GAAGtB,KAAK,CAACuB,QAb5B;AAAA,MAcIA,QAAQ,GAAGD,eAAe,KAAK,KAAK,CAAzB,GAA6B,EAA7B,GAAkCA,eAdjD;AAAA,MAeIE,aAAa,GAAGxB,KAAK,CAACwB,aAf1B;AAAA,MAgBIC,aAAa,GAAGzB,KAAK,CAACyB,aAhB1B;AAAA,MAiBIC,MAAM,GAAG1B,KAAK,CAAC0B,MAjBnB;AAAA,MAkBItB,KAAK,GAAGJ,KAAK,CAACI,KAlBlB;AAAA,MAmBIuB,iBAAiB,GAAG3B,KAAK,CAAC4B,UAnB9B;AAAA,MAoBIC,WAAW,GAAGF,iBAAiB,KAAK,KAAK,CAA3B,GAA+B5B,iBAA/B,GAAmD4B,iBApBrE;AAAA,MAqBIG,qBAAqB,GAAG9B,KAAK,CAAC+B,iBArBlC;AAAA,MAsBIA,iBAAiB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,WAAnC,GAAiDA,qBAtBzE;AAAA,MAuBIE,iBAAiB,GAAGhC,KAAK,CAACiC,UAvB9B;AAAA,MAwBIA,UAAU,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+BhD,UAA/B,GAA4CgD,iBAxB7D;AAAA,MAyBIE,qBAAqB,GAAGlC,KAAK,CAACmC,kBAzBlC;AAAA,MA0BIA,kBAAkB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,EAAnC,GAAwCA,qBA1BjE;AAAA,MA2BIE,qBAAqB,GAAGpC,KAAK,CAACqC,eA3BlC;AAAA,MA4BIA,eAAe,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,IAAnC,GAA0CA,qBA5BhE;AAAA,MA6BIE,IAAI,GAAGlE,wBAAwB,CAAC4B,KAAD,EAAQ3B,SAAR,CA7BnC;;AA+BA,MAAIkE,SAAS,GAAG3D,QAAQ,CAACuD,kBAAD,CAAxB;AAAA,MACIK,UAAU,GAAGrE,cAAc,CAACoE,SAAD,EAAY,CAAZ,CAD/B;AAAA,MAEIE,WAAW,GAAGD,UAAU,CAAC,CAAD,CAF5B;AAAA,MAGIE,cAAc,GAAGF,UAAU,CAAC,CAAD,CAH/B;;AAKA,MAAIG,UAAU,GAAG/D,QAAQ,CAAC,IAAD,CAAzB;AAAA,MACIgE,UAAU,GAAGzE,cAAc,CAACwE,UAAD,EAAa,CAAb,CAD/B;AAAA,MAEIE,SAAS,GAAGD,UAAU,CAAC,CAAD,CAF1B;AAAA,MAGIE,YAAY,GAAGF,UAAU,CAAC,CAAD,CAH7B;;AAKA,MAAIG,SAAS,GAAGpE,MAAM,EAAtB;AACA,MAAIqE,KAAK,GAAG3D,QAAQ,EAApB;AACA,MAAI4D,MAAM,GAAGD,KAAK,CAACC,MAAnB;AACA,MAAIC,UAAU,GAAG1E,WAAW,CAAC,UAAU2E,IAAV,EAAgB;AAC3C,WAAOC,OAAO,CAAC7B,QAAQ,CAAC8B,IAAT,CAAc,UAAUC,YAAV,EAAwB;AACnD,aAAOA,YAAY,KAAKH,IAAI,CAACI,KAA7B;AACD,KAFc,CAAD,CAAd;AAGD,GAJ2B,EAIzB,CAAChC,QAAD,CAJyB,CAA5B;AAKA,MAAIiC,YAAY,GAAG9E,OAAO,CAAC,YAAY;AACrC,WAAOgC,eAAe,CAAC+C,GAAhB,CAAoB,UAAUN,IAAV,EAAgB;AACzC,aAAOA,IAAI,CAAC7C,KAAZ;AACD,KAFM,CAAP;AAGD,GAJyB,EAIvB,CAACI,eAAD,CAJuB,CAA1B,CAlD8D,CAsDvC;;AAEvB,MAAIjB,OAAO,GAAGf,OAAO,CAAC,YAAY;AAChC,QAAI+D,WAAW,CAACiB,IAAZ,OAAuB,EAA3B,EAA+B;AAC7B,aAAOhD,eAAP;AACD,KAH+B,CAG9B;;;AAGF,QAAI,OAAOc,aAAP,KAAyB,UAA7B,EAAyC;AACvC,aAAOA,aAAa,CAACgC,YAAD,EAAef,WAAf,CAAb,CAAyCgB,GAAzC,CAA6C,UAAUE,IAAV,EAAgB;AAClE,eAAOjD,eAAe,CAAC2C,IAAhB,CAAqB,UAAUF,IAAV,EAAgB;AAC1C,iBAAOA,IAAI,CAAC7C,KAAL,KAAeqD,IAAtB;AACD,SAFM,CAAP;AAGD,OAJM,CAAP;AAKD;;AAED,WAAOnE,WAAW,CAACkB,eAAD,EAAkB+B,WAAlB,EAA+B;AAC/C7C,MAAAA,GAAG,EAAE;AAD0C,KAA/B,CAAlB;AAGD,GAjBoB,EAiBlB,CAACc,eAAD,EAAkB8C,YAAlB,EAAgChC,aAAhC,EAA+CiB,WAA/C,CAjBkB,CAArB;AAkBA,MAAImB,eAAe,GAAGpF,WAAW,CAAC,YAAY;AAC5C,WAAOiB,OAAO,CAACoE,SAAR,CAAkB,UAAUC,MAAV,EAAkB;AACzC,aAAOA,MAAM,CAACP,KAAP,KAAiBhC,QAAQ,CAACA,QAAQ,CAACwC,MAAT,GAAkB,CAAnB,CAAhC;AACD,KAFM,CAAP;AAGD,GAJgC,EAI9B,CAACxC,QAAD,EAAW9B,OAAX,CAJ8B,CAAjC;AAKA,MAAIuE,aAAa,GAAGxF,WAAW,CAAC,YAAY;AAC1C,QAAIyF,SAAS,GAAGL,eAAe,KAAK,CAApC;;AAEA,QAAIK,SAAS,GAAG,CAAhB,EAAmB;AACjBA,MAAAA,SAAS,GAAGxE,OAAO,CAACsE,MAAR,GAAiB,CAA7B;AACD;;AAED,QAAIb,UAAU,CAACzD,OAAO,CAACwE,SAAD,CAAR,CAAd,EAAoC;AAClC;AACD;;AAEDjD,IAAAA,QAAQ,CAACvB,OAAO,CAACwE,SAAD,CAAR,CAAR;AACD,GAZ8B,EAY5B,CAACjD,QAAD,EAAWvB,OAAX,EAAoBmE,eAApB,EAAqCV,UAArC,CAZ4B,CAA/B;AAaA,MAAIgB,eAAe,GAAG1F,WAAW,CAAC,YAAY;AAC5C,QAAIyF,SAAS,GAAGL,eAAe,KAAK,CAApC;;AAEA,QAAIK,SAAS,KAAKxE,OAAO,CAACsE,MAA1B,EAAkC;AAChCE,MAAAA,SAAS,GAAG,CAAZ;AACD;;AAED,QAAI,CAACf,UAAU,CAACzD,OAAO,CAACwE,SAAD,CAAR,CAAf,EAAqC;AACnCjD,MAAAA,QAAQ,CAACvB,OAAO,CAACwE,SAAD,CAAR,CAAR;AACD;AACF,GAVgC,EAU9B,CAACjD,QAAD,EAAWvB,OAAX,EAAoBmE,eAApB,EAAqCV,UAArC,CAV8B,CAAjC;AAWA,MAAIiB,YAAY,GAAG3F,WAAW,CAAC,UAAUiE,WAAV,EAAuB;AACpDC,IAAAA,cAAc,CAACD,WAAD,CAAd;AACArB,IAAAA,cAAc,CAACqB,WAAD,CAAd;AACD,GAH6B,EAG3B,CAACrB,cAAD,CAH2B,CAA9B;AAIA,MAAIgD,YAAY,GAAG5F,WAAW,CAAC,UAAU2E,IAAV,EAAgB;AAC7C,QAAID,UAAU,CAACC,IAAD,CAAV,IAAoB1B,aAAxB,EAAuC;AACrCP,MAAAA,UAAU,CAACiC,IAAD,CAAV;AACD,KAFD,MAEO;AACLnC,MAAAA,QAAQ,CAACmC,IAAD,CAAR;AACD;;AAED,QAAI,CAAC1B,aAAD,IAAkBX,aAAtB,EAAqC;AACnCD,MAAAA,KAAK;AACN;AACF,GAV6B,EAU3B,CAACK,UAAD,EAAaO,aAAb,EAA4BX,aAA5B,EAA2CE,QAA3C,EAAqDkC,UAArD,EAAiErC,KAAjE,CAV2B,CAA9B;AAWA,MAAIwD,WAAW,GAAG7F,WAAW,CAAC,YAAY;AACxC,QAAI0E,UAAU,GAAGU,eAAe,OAAO,CAAC,CAAxC;;AAEA,QAAIV,UAAJ,EAAgB;AACd,UAAI,CAACzB,aAAD,IAAkBX,aAAtB,EAAqC;AACnCD,QAAAA,KAAK;AACN;AACF;AACF,GAR4B,EAQ1B,CAACY,aAAD,EAAgBZ,KAAhB,EAAuBC,aAAvB,EAAsC8C,eAAtC,CAR0B,CAA7B;AASA,MAAIU,cAAc,GAAG9F,WAAW,CAAC,UAAU2E,IAAV,EAAgB;AAC/CjC,IAAAA,UAAU,CAACiC,IAAD,CAAV;AACD,GAF+B,EAE7B,CAACjC,UAAD,CAF6B,CAAhC;AAGA,MAAIqD,aAAa,GAAG/F,WAAW,CAAC,UAAUgG,CAAV,EAAa;AAC3C,QAAIA,CAAC,CAAC5E,GAAF,KAAU,SAAd,EAAyB;AACvBoE,MAAAA,aAAa;AACd;;AAED,QAAIQ,CAAC,CAAC5E,GAAF,KAAU,WAAd,EAA2B;AACzBsE,MAAAA,eAAe;AAChB;;AAED,QAAIM,CAAC,CAAC5E,GAAF,KAAU,OAAd,EAAuB;AACrByE,MAAAA,WAAW;AACZ;;AAED,QAAIG,CAAC,CAAC5E,GAAF,KAAU,QAAd,EAAwB;AACtBiB,MAAAA,KAAK;AACN;AACF,GAhB8B,EAgB5B,CAACA,KAAD,EAAQmD,aAAR,EAAuBE,eAAvB,EAAwCG,WAAxC,CAhB4B,CAA/B;AAiBA5F,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAI4C,SAAJ,EAAe;AACb0B,MAAAA,SAAS,CAAC0B,OAAV,GAAoBC,qBAAqB,CAAC,YAAY;AACpD,YAAI7B,SAAS,IAAIR,eAAjB,EAAkC;AAChCQ,UAAAA,SAAS,CAAC8B,KAAV;AACD;AACF,OAJwC,CAAzC;AAKAC,MAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCN,aAAnC;AACA,aAAO,YAAY;AACjBO,QAAAA,oBAAoB,CAAC/B,SAAS,CAAC0B,OAAX,CAApB;AACAG,QAAAA,MAAM,CAACG,mBAAP,CAA2B,SAA3B,EAAsCR,aAAtC;AACD,OAHD;AAID;AACF,GAbQ,EAaN,CAAClD,SAAD,EAAYwB,SAAZ,EAAuB0B,aAAvB,EAAsClC,eAAtC,CAbM,CAAT;AAcA,MAAI2C,UAAU,GAAGtD,MAAM,IAAIL,SAAS,GAAG,EAAH,GAAQ,CAArB,CAAvB;AACA,MAAI4D,YAAY,GAAGrB,eAAe,EAAlC;AACA,MAAIsB,aAAa,GAAGD,YAAY,KAAK,CAAC,CAAlB,GAAsB,CAAtB,GAA0BA,YAA9C;AACA,SAAO,aAAa3G,KAAK,CAAC2B,aAAN,CAAoBf,IAApB,EAA0BhB,QAAQ,CAAC;AACrDwD,IAAAA,MAAM,EAAEA,MAD6C;AAErDtB,IAAAA,KAAK,EAAEA,KAF8C;AAGrD+E,IAAAA,OAAO,EAAE,MAH4C;AAIrDC,IAAAA,aAAa,EAAE;AAJsC,GAAD,EAKnD9C,IALmD,CAAlC,EAKVjB,SAAS,IAAI,aAAa/C,KAAK,CAAC2B,aAAN,CAAoBb,SAApB,EAA+B;AACjEsC,IAAAA,MAAM,EAAE,EADyD;AAEjE2D,IAAAA,eAAe,EAAEpC,MAAM,CAACqC,MAAP,CAAcC;AAFkC,GAA/B,EAGjC,aAAajH,KAAK,CAAC2B,aAAN,CAAoBd,qBAApB,EAA2C;AACzDqG,IAAAA,QAAQ,EAAErB,YAD+C;AAEzDsB,IAAAA,GAAG,EAAE3C,YAFoD;AAGzD4C,IAAAA,WAAW,EAAE,IAH4C;AAIzDC,IAAAA,WAAW,EAAE5D,iBAJ4C;AAKzD7B,IAAAA,IAAI,EAAE+B;AALmD,GAA3C,CAHoB,CALhB,EAcf,aAAa3D,KAAK,CAAC2B,aAAN,CAAoBf,IAApB,EAA0B;AAC1C0G,IAAAA,IAAI,EAAE;AADoC,GAA1B,EAEfnG,OAAO,CAACsE,MAAR,GAAiB,CAAjB,IAAsB,aAAazF,KAAK,CAAC2B,aAAN,CAAoBpB,WAApB,EAAiC;AACrE6C,IAAAA,MAAM,EAAEsD,UAD6D;AAErE5E,IAAAA,KAAK,EAAE,MAF8D;AAGrEyF,IAAAA,QAAQ,EAAEjF,UAH2D;AAIrEkF,IAAAA,SAAS,EAAErG,OAAO,CAACsE,MAJkD;AAKrEgC,IAAAA,aAAa,EAAE,EALsD;AAMrEC,IAAAA,iBAAiB,EAAE,MANkD;AAOrEd,IAAAA,aAAa,EAAEA,aAAa,IAAIe,SAPqC;AAQrErE,IAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBsE,KAApB,EAA2B;AACrC,UAAIC,KAAK,GAAGD,KAAK,CAACC,KAAlB;AAAA,UACIC,KAAK,GAAGF,KAAK,CAACE,KADlB;AAEA,UAAIjD,IAAI,GAAG1D,OAAO,CAAC0G,KAAD,CAAlB;AACA,UAAIE,cAAc,GAAGnD,UAAU,CAACC,IAAD,CAA/B;AACA,UAAImD,SAAS,GAAG;AACd1G,QAAAA,GAAG,EAAEuD,IAAI,CAACI,KADI;AAEdjD,QAAAA,KAAK,EAAE6C,IAAI,CAAC7C,KAFE;AAGdJ,QAAAA,IAAI,EAAEiD,IAAI,CAACjD,IAHG;AAIdiD,QAAAA,IAAI,EAAEA,IAJQ;AAKdiD,QAAAA,KAAK,EAAEA,KALO;AAMd1E,QAAAA,MAAM,EAAEd,UANM;AAOdI,QAAAA,QAAQ,EAAE,SAASA,QAAT,GAAoB;AAC5B,iBAAOoD,YAAY,CAACjB,IAAD,CAAnB;AACD,SATa;AAUdjC,QAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAChC,iBAAOoD,cAAc,CAACnB,IAAD,CAArB;AACD,SAZa;AAadoD,QAAAA,YAAY,EAAE,CAACF,cAAD,IAAmB5E,aAbnB;AAcdyB,QAAAA,UAAU,EAAEmD,cAdE;AAedG,QAAAA,QAAQ,EAAErD,IAAI,CAACqD,QAfD;AAgBdC,QAAAA,QAAQ,EAAE;AAhBI,OAAhB;AAkBA,aAAO5E,WAAW,CAACyE,SAAD,CAAlB;AACD;AAhCoE,GAAjC,CAFpB,CAdE,CAApB;AAkDD,CAtNkC,CAAnC;AAuNA9F,WAAW,CAACkG,SAAZ,GAAwB;AACtBjH,EAAAA,OAAO,EAAEV,SAAS,CAAC4H,OAAV,CAAkBpH,mBAAlB,CADa;AAEtBsB,EAAAA,KAAK,EAAE9B,SAAS,CAAC6H,IAFK;AAGtBlF,EAAAA,MAAM,EAAE3C,SAAS,CAAC8H,MAHI;AAItBzG,EAAAA,KAAK,EAAErB,SAAS,CAAC8H,MAJK;;AAMtB;AACF;AACA;AACEpF,EAAAA,aAAa,EAAE1C,SAAS,CAAC+H,IATH;;AAWtB;AACF;AACA;AACEhG,EAAAA,aAAa,EAAE/B,SAAS,CAAC+H,IAdH;;AAgBtB;AACF;AACA;AACEvF,EAAAA,QAAQ,EAAExC,SAAS,CAAC4H,OAAV,CAAkB5H,SAAS,CAACgI,SAAV,CAAoB,CAAChI,SAAS,CAACiI,MAAX,EAAmBjI,SAAS,CAAC8H,MAA7B,CAApB,CAAlB,CAnBY;;AAqBtB;AACF;AACA;AACExE,EAAAA,eAAe,EAAEtD,SAAS,CAAC+H,IAxBL;AAyBtB9F,EAAAA,QAAQ,EAAEjC,SAAS,CAAC6H,IAzBE;AA0BtB1F,EAAAA,UAAU,EAAEnC,SAAS,CAAC6H,IA1BA;AA2BtBxF,EAAAA,cAAc,EAAErC,SAAS,CAAC6H,IA3BJ;AA4BtBvF,EAAAA,SAAS,EAAEtC,SAAS,CAAC+H,IA5BC;AA6BtBlG,EAAAA,UAAU,EAAE7B,SAAS,CAAC8H,MA7BA;AA8BtBjF,EAAAA,UAAU,EAAE7C,SAAS,CAAC6H,IA9BA;AA+BtB7E,EAAAA,iBAAiB,EAAEhD,SAAS,CAACiI,MA/BP;AAgCtB/E,EAAAA,UAAU,EAAElD,SAAS,CAACgI,SAAV,CAAoB,CAAChI,SAAS,CAACkI,WAAX,EAAwBlI,SAAS,CAACmI,OAAlC,CAApB,CAhCU;AAiCtB1F,EAAAA,aAAa,EAAEzC,SAAS,CAAC6H,IAjCH;AAkCtBzE,EAAAA,kBAAkB,EAAEpD,SAAS,CAACiI;AAlCR,CAAxB;AAoCA,eAAexG,WAAf","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"options\", \"optionSize\", \"close\", \"closeOnSelect\", \"onSelect\", \"onDeselect\", \"onFilterChange\", \"hasFilter\", \"selected\", \"optionsFilter\", \"isMultiSelect\", \"height\", \"width\", \"renderItem\", \"filterPlaceholder\", \"filterIcon\", \"defaultSearchValue\", \"shouldAutoFocus\"];\nimport React, { memo, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport VirtualList from '@segment/react-tiny-virtual-list';\nimport fuzzaldrin from 'fuzzaldrin-plus';\nimport PropTypes from 'prop-types';\nimport { SearchIcon } from '../../icons';\nimport { Image } from '../../image';\nimport { Pane } from '../../layers';\nimport SearchTableHeaderCell from '../../table/src/SearchTableHeaderCell';\nimport TableHead from '../../table/src/TableHead';\nimport { useTheme } from '../../theme';\nimport Option from './Option';\nimport OptionShapePropType from './OptionShapePropType';\n/**\n * Fuzzaldrin-plus is the default filter, but you can use your own\n * as long as they follow the following signature:\n * @param options <Array[String]> - ['label', 'label2', ...]\n * @param input <String>\n */\n\nvar fuzzyFilter = function fuzzyFilter(options, input, _ref) {\n  var key = _ref.key;\n  return fuzzaldrin.filter(options, input, {\n    key: key\n  });\n};\n\nvar noop = function noop() {};\n\nvar defaultRenderItem = function defaultRenderItem(props) {\n  return /*#__PURE__*/React.createElement(Option, props, props.icon && /*#__PURE__*/React.createElement(Image, {\n    src: props.icon,\n    width: 24,\n    marginRight: 8\n  }), props.label);\n};\n\ndefaultRenderItem.displayName = \"defaultRenderItem\";\nvar OptionsList = /*#__PURE__*/memo(function OptionsList(props) {\n  var _props$options = props.options,\n      originalOptions = _props$options === void 0 ? [] : _props$options,\n      _props$optionSize = props.optionSize,\n      optionSize = _props$optionSize === void 0 ? 33 : _props$optionSize,\n      close = props.close,\n      closeOnSelect = props.closeOnSelect,\n      _props$onSelect = props.onSelect,\n      onSelect = _props$onSelect === void 0 ? noop : _props$onSelect,\n      _props$onDeselect = props.onDeselect,\n      onDeselect = _props$onDeselect === void 0 ? noop : _props$onDeselect,\n      _props$onFilterChange = props.onFilterChange,\n      onFilterChange = _props$onFilterChange === void 0 ? noop : _props$onFilterChange,\n      hasFilter = props.hasFilter,\n      _props$selected = props.selected,\n      selected = _props$selected === void 0 ? [] : _props$selected,\n      optionsFilter = props.optionsFilter,\n      isMultiSelect = props.isMultiSelect,\n      height = props.height,\n      width = props.width,\n      _props$renderItem = props.renderItem,\n      _renderItem = _props$renderItem === void 0 ? defaultRenderItem : _props$renderItem,\n      _props$filterPlacehol = props.filterPlaceholder,\n      filterPlaceholder = _props$filterPlacehol === void 0 ? 'Filter...' : _props$filterPlacehol,\n      _props$filterIcon = props.filterIcon,\n      filterIcon = _props$filterIcon === void 0 ? SearchIcon : _props$filterIcon,\n      _props$defaultSearchV = props.defaultSearchValue,\n      defaultSearchValue = _props$defaultSearchV === void 0 ? '' : _props$defaultSearchV,\n      _props$shouldAutoFocu = props.shouldAutoFocus,\n      shouldAutoFocus = _props$shouldAutoFocu === void 0 ? true : _props$shouldAutoFocu,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var _useState = useState(defaultSearchValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchValue = _useState2[0],\n      setSearchValue = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchRef = _useState4[0],\n      setSearchRef = _useState4[1];\n\n  var requestId = useRef();\n  var theme = useTheme();\n  var tokens = theme.tokens;\n  var isSelected = useCallback(function (item) {\n    return Boolean(selected.find(function (selectedItem) {\n      return selectedItem === item.value;\n    }));\n  }, [selected]);\n  var optionLabels = useMemo(function () {\n    return originalOptions.map(function (item) {\n      return item.label;\n    });\n  }, [originalOptions]); // Gets filtered options any time the filter fn, value, or options change\n\n  var options = useMemo(function () {\n    if (searchValue.trim() === '') {\n      return originalOptions;\n    } // Preserve backwards compatibility with allowing custom filters, which accept array of strings\n\n\n    if (typeof optionsFilter === 'function') {\n      return optionsFilter(optionLabels, searchValue).map(function (name) {\n        return originalOptions.find(function (item) {\n          return item.label === name;\n        });\n      });\n    }\n\n    return fuzzyFilter(originalOptions, searchValue, {\n      key: 'label'\n    });\n  }, [originalOptions, optionLabels, optionsFilter, searchValue]);\n  var getCurrentIndex = useCallback(function () {\n    return options.findIndex(function (option) {\n      return option.value === selected[selected.length - 1];\n    });\n  }, [selected, options]);\n  var handleArrowUp = useCallback(function () {\n    var nextIndex = getCurrentIndex() - 1;\n\n    if (nextIndex < 0) {\n      nextIndex = options.length - 1;\n    }\n\n    if (isSelected(options[nextIndex])) {\n      return;\n    }\n\n    onSelect(options[nextIndex]);\n  }, [onSelect, options, getCurrentIndex, isSelected]);\n  var handleArrowDown = useCallback(function () {\n    var nextIndex = getCurrentIndex() + 1;\n\n    if (nextIndex === options.length) {\n      nextIndex = 0;\n    }\n\n    if (!isSelected(options[nextIndex])) {\n      onSelect(options[nextIndex]);\n    }\n  }, [onSelect, options, getCurrentIndex, isSelected]);\n  var handleChange = useCallback(function (searchValue) {\n    setSearchValue(searchValue);\n    onFilterChange(searchValue);\n  }, [onFilterChange]);\n  var handleSelect = useCallback(function (item) {\n    if (isSelected(item) && isMultiSelect) {\n      onDeselect(item);\n    } else {\n      onSelect(item);\n    }\n\n    if (!isMultiSelect && closeOnSelect) {\n      close();\n    }\n  }, [onDeselect, isMultiSelect, closeOnSelect, onSelect, isSelected, close]);\n  var handleEnter = useCallback(function () {\n    var isSelected = getCurrentIndex() !== -1;\n\n    if (isSelected) {\n      if (!isMultiSelect && closeOnSelect) {\n        close();\n      }\n    }\n  }, [isMultiSelect, close, closeOnSelect, getCurrentIndex]);\n  var handleDeselect = useCallback(function (item) {\n    onDeselect(item);\n  }, [onDeselect]);\n  var handleKeyDown = useCallback(function (e) {\n    if (e.key === 'ArrowUp') {\n      handleArrowUp();\n    }\n\n    if (e.key === 'ArrowDown') {\n      handleArrowDown();\n    }\n\n    if (e.key === 'Enter') {\n      handleEnter();\n    }\n\n    if (e.key === 'Escape') {\n      close();\n    }\n  }, [close, handleArrowUp, handleArrowDown, handleEnter]);\n  useEffect(function () {\n    if (hasFilter) {\n      requestId.current = requestAnimationFrame(function () {\n        if (searchRef && shouldAutoFocus) {\n          searchRef.focus();\n        }\n      });\n      window.addEventListener('keydown', handleKeyDown);\n      return function () {\n        cancelAnimationFrame(requestId.current);\n        window.removeEventListener('keydown', handleKeyDown);\n      };\n    }\n  }, [hasFilter, searchRef, handleKeyDown, shouldAutoFocus]);\n  var listHeight = height - (hasFilter ? 32 : 0);\n  var currentIndex = getCurrentIndex();\n  var scrollToIndex = currentIndex === -1 ? 0 : currentIndex;\n  return /*#__PURE__*/React.createElement(Pane, _extends({\n    height: height,\n    width: width,\n    display: \"flex\",\n    flexDirection: \"column\"\n  }, rest), hasFilter && /*#__PURE__*/React.createElement(TableHead, {\n    height: 32,\n    backgroundColor: tokens.colors.gray50\n  }, /*#__PURE__*/React.createElement(SearchTableHeaderCell, {\n    onChange: handleChange,\n    ref: setSearchRef,\n    borderRight: null,\n    placeholder: filterPlaceholder,\n    icon: filterIcon\n  })), /*#__PURE__*/React.createElement(Pane, {\n    flex: 1\n  }, options.length > 0 && /*#__PURE__*/React.createElement(VirtualList, {\n    height: listHeight,\n    width: \"100%\",\n    itemSize: optionSize,\n    itemCount: options.length,\n    overscanCount: 20,\n    scrollToAlignment: \"auto\",\n    scrollToIndex: scrollToIndex || undefined,\n    renderItem: function renderItem(_ref2) {\n      var index = _ref2.index,\n          style = _ref2.style;\n      var item = options[index];\n      var isItemSelected = isSelected(item);\n      var itemProps = {\n        key: item.value,\n        label: item.label,\n        icon: item.icon,\n        item: item,\n        style: style,\n        height: optionSize,\n        onSelect: function onSelect() {\n          return handleSelect(item);\n        },\n        onDeselect: function onDeselect() {\n          return handleDeselect(item);\n        },\n        isSelectable: !isItemSelected || isMultiSelect,\n        isSelected: isItemSelected,\n        disabled: item.disabled,\n        tabIndex: 0\n      };\n      return _renderItem(itemProps);\n    }\n  })));\n});\nOptionsList.propTypes = {\n  options: PropTypes.arrayOf(OptionShapePropType),\n  close: PropTypes.func,\n  height: PropTypes.number,\n  width: PropTypes.number,\n\n  /**\n   * When true, multi select is accounted for.\n   */\n  isMultiSelect: PropTypes.bool,\n\n  /**\n   * When true, menu closes on option selection.\n   */\n  closeOnSelect: PropTypes.bool,\n\n  /**\n   * This holds the values of the options\n   */\n  selected: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number])),\n\n  /**\n   * When true, menu auto focuses on the search/filter bar.\n   */\n  shouldAutoFocus: PropTypes.bool,\n  onSelect: PropTypes.func,\n  onDeselect: PropTypes.func,\n  onFilterChange: PropTypes.func,\n  hasFilter: PropTypes.bool,\n  optionSize: PropTypes.number,\n  renderItem: PropTypes.func,\n  filterPlaceholder: PropTypes.string,\n  filterIcon: PropTypes.oneOfType([PropTypes.elementType, PropTypes.element]),\n  optionsFilter: PropTypes.func,\n  defaultSearchValue: PropTypes.string\n};\nexport default OptionsList;"]},"metadata":{},"sourceType":"module","externalDependencies":[]}